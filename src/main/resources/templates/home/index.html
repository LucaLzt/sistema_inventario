<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>Home</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navbar fragment -->
    <div th:replace="~{fragments :: navbar('home')}"></div>
	
	<!--  Principal Metrics -->
	<div class="row mb-4">
	    <div class="col-md-3">
	        <div class="card bg-primary text-white">
	            <div class="card-body">
	                <h5>Total Products</h5>
	                <h2 th:text="${totalProducts}">1,234</h2>
	            </div>
	        </div>
	    </div>
	    <div class="col-md-3">
	        <div class="card bg-success text-white">
	            <div class="card-body">
	                <h5>Stock Available</h5>
	                <h2 th:text="${stockAvailable}">8,567</h2>
	            </div>
	        </div>
	    </div>
	    <div class="col-md-3">
	        <div class="card bg-warning text-white">
	            <div class="card-body">
	                <h5>Low Stock</h5>
	                <h2 th:text="${lowStock}">23</h2>
	            </div>
	        </div>
	    </div>
	    <div class="col-md-3">
	        <div class="card bg-danger text-white">
	            <div class="card-body">
	                <h5>Out of Stock</h5>
	                <h2 th:text="${outOfStock}">5</h2>
	            </div>
	        </div>
	    </div>
	</div>
	
	<!-- Alerts and notifications -->
	<div class="row mb-4">
	    <div class="col-12">
	        <div class="alert alert-warning" th:if="${productsStockLow.size() > 0}">
	            <h5>‚ö†Ô∏è Products with low stock:</h5>
	            <ul class="mb-0">
	                <li th:each="product : ${productsStockLow}" 
	                    th:text="${product.name + ' (Stock: ' + product.stockActual + ')'}">
	                </li>
	            </ul>
	        </div>
	    </div>
	</div>
	
	<!-- Fast Access -->
	<div class="row mb-4">
	    <div class="col-12">
	        <h4>Quick Actions</h4>
	        <div class="d-flex gap-2 flex-wrap">
	            <a th:href="@{/products/new}" class="btn btn-success">
	                ‚ûï Add Product
	            </a>
	            <a th:href="@{/movements/entrance}" class="btn btn-primary">
	                üì¶ Register Entry
	            </a>
	            <a th:href="@{/movements/exit}" class="btn btn-warning">
	                üì§ Register Exit
	            </a>
	            <a th:href="@{/reports}" class="btn btn-info">
	                üìä View Reports
	            </a>
	        </div>
	    </div>
	</div>
	
	<!-- Recent Activity -->
	<div class="row">
	    <div class="col-md-6">
	        <div class="card">
	            <div class="card-header">
	                <h5>üìà Lastest Movements</h5>
	            </div>
	            <div class="card-body">
	                <div class="table-responsive">
	                    <table class="table table-sm">
	                        <thead>
	                            <tr>
	                                <th>Date</th>
	                                <th>Product</th>
	                                <th>Type</th>
	                                <th>Amount</th>
	                            </tr>
	                        </thead>
	                        <tbody>
	                            <tr th:each="movement : ${lastMovements}">
	                                <td th:text="${#dates.format(movement.date, 'dd/MM')}"></td>
	                                <td th:text="${movement.product.name}"></td>
	                                <td>
	                                    <span class="badge" 
	                                          th:classappend="${movement.type == 'IN'} ? 'bg-success' : 'bg-danger'"
	                                          th:text="${movement.type}">
	                                    </span>
	                                </td>
	                                <td th:text="${movement.amount}"></td>
	                            </tr>
	                        </tbody>
	                    </table>
	                </div>
	            </div>
	        </div>
	    </div>
	    
	    <div class="col-md-6">
	        <div class="card">
	            <div class="card-header">
	                <h5>üîç Most Popular Products</h5>
	            </div>
	            <div class="card-body">
	                <div class="table-responsive">
	                    <table class="table table-sm">
	                        <thead>
	                            <tr>
	                                <th>Product</th>
	                                <th>Actual Stock</th>
	                                <th>Movements</th>
	                            </tr>
	                        </thead>
	                        <tbody>
	                            <tr th:each="product : ${mostMovedProducts}">
	                                <td th:text="${product.name}"></td>
	                                <td th:text="${product.stockActual}"></td>
	                                <td>
	                                    <span class="badge bg-info" th:text="${product.totalMovements}"></span>
	                                </td>
	                            </tr>
	                        </tbody>
	                    </table>
	                </div>
	            </div>
	        </div>
	    </div>
	</div>

</body>
</html>