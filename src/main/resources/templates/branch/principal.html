<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
				xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Branches - Inventory System</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
	<style>
		body {
			padding: 0;
			margin: 0;
		}
		.card.transition {
		    transition: box-shadow 0.2s, transform 0.2s;
		}
		.card.transition:hover {
		    box-shadow: 0 0.5rem 2rem rgba(33,37,41,.15);
		    transform: translateY(-2px) scale(1.02);
		    border-color: rgb(0, 0, 0);
		}
	</style>
</head>
<body>
	<!-- Navbar -->
	<div th:replace="~{fragments/navbar :: navbar('branches')}"></div>
	
	<!-- Main Container -->
	<div class="main-container">
	
		<!-- Title -->
		<h3 class="m-3">Branches</h3>
	
		<!-- Filter Section -->
		<div class="container-fluid">
		    <div class="d-flex align-items-center mb-4 ms-1">
		        <form class="row g-2 align-items-center" th:action="@{/branches/home}" method="get">
		            <div class="col-auto">
		                <label for="filter" class="col-form-label">Filter</label>
		            </div>
		            <div class="col-auto">
		                <input class="form-control" type="text" id="filter" name="filter" placeholder="Branch name/address" th:value="${filter}" autocomplete="off"/>
		            </div>
		            <div class="col-auto">
		                <button class="btn btn-light btn-outline-dark" type="submit">Search</button>
		                <a th:href="@{/branches/home}" class="btn btn-outline-secondary">Reset</a>
		            </div>
		        </form>
		        <div sec:authorize="hasRole('ROLE_ADMIN')" class="d-flex ms-auto">
			        <div class="me-3">
			            <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#modalAddBranch">
			                Register Branch
			            </button>
			        </div>
		        </div>
		    </div>
		</div>
		
		<!-- Branches Cards -->
		<div class="container-fluid">
		    <h5 class="mb-3 ms-1 mt-4">List of Branches</h5>
		    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
		        <div class="col" th:each="branch : ${branches}">
		            <div class="card h-100 text-decoration-none shadow-sm transition">
		                <div class="card-body d-flex flex-column justify-content-center align-items-center py-4 position-relative">
		                    <i class="fa-solid fa-building fa-2x text-dark mb-3"></i>
		                    <h5 class="card-title fw-bold text-center mb-1" th:text="${branch.name}">Branch Name</h5>
		                    <p class="card-text text-secondary text-center small mb-0" th:text="${branch.address}">Address</p>
		                    <a th:href="@{/branches/{id}/details(id=${branch.id})}"
		                       class="stretched-link"></a>
		                </div>
		            </div>
		        </div>
		    </div>
		</div>
    </div>
	
	<!-- Modals -->
	<div th:replace="~{fragments/branch-modals :: modal-add-branch}"></div>
	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
	
	<!-- Script to show the modal if the flag is set -->
	<script th:if="${showAddBranchModal}">
	    document.addEventListener('DOMContentLoaded', function() {
	        var modal = new bootstrap.Modal(document.getElementById('modalAddBranch'));
	        modal.show();
	    });
	</script>
</body>
</html>